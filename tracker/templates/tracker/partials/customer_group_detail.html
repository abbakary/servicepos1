{% load humanize %} {% load date_filters %} {% comment %}Partial that renders the detailed customer list for a selected group (used by AJAX){% endcomment %} <div class="row mt-5" id="groupDetail"> <div class="col-12"> <div class="card"> <div class="card-header d-flex justify-content-between align-items-center"> <h5 class="mb-0">{{ selected_group_display }} Customers</h5> <div class="d-flex align-items-center"> <span class="badge bg-primary me-2">{{ detailed_customers|length }} customers</span> <a href="{{ request.path }}" class="btn btn-sm btn-outline-secondary" id="backToGroupsBtn"> <i class="fas fa-arrow-left me-1"></i> Back to Groups </a> </div> </div> <div class="card-body"> {% if detailed_customers %} <div class="table-responsive"> <table class="table table-hover" id="cgTable"> <thead> <tr> <th>Name</th> <th>Phone</th> <th>Email</th> <th>Total Spent</th> <th>Orders</th> <th>Last Order</th> <th>Actions</th> </tr> </thead> <tbody> {% for customer in detailed_customers %} <tr> <td><a href="{% url 'tracker:customer_detail' customer.id %}" class="text-primary fw-medium">{{ customer.full_name }}</a></td> <td>{{ customer.phone|default:'-' }}</td> <td>{{ customer.email|default:'-'|truncatechars:20 }}</td> <td>TZS {{ customer.total_spent|default:0|floatformat:2|intcomma }}</td> <td>{{ customer.recent_orders_count|default:0 }}</td> <td>{{ customer.last_order_date|custom_date_only|default:'-' }}</td> <td> <a href="{% url 'tracker:customer_detail' customer.id %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i> View</a> </td> </tr> {% endfor %} </tbody> </table> </div> {% else %} <div class="text-center py-5"> <i class="fas fa-users-slash fa-3x text-muted mb-3"></i> <h5>No customers found in this group</h5> </div> {% endif %} </div> </div> </div> </div> 
